<link rel="import" href="./cosmoz-templatizer.html ">
<script>
	(function () {
		'use strict';
		const IS_V2 = Polymer.Templatize != null;

		window.Cosmoz = window.Cosmoz || {};

		Cosmoz.Templatize = {
			templatize(template, owner, options = {}) {
				if (IS_V2) {
					return Polymer.templatize(template, owner, {
						mutableData: Boolean(options.mutableData),
						parentModel: options.parentModel,
						instanceProps: options.instanceProps,
						forwardHostProp: options.forwardHostProp,
						notifyInstanceProp: options.notifyInstanceProp
					});
				}
				let templatizer  = template.__czTemplatizer__  || document.createElement('cosmoz-templatizer');
				return templatizer.templatize(template, {
					instanceProps: options.instanceProps,
					forwardParentProp: options.forwardParentProp,
					forwardParentPath: options.forwardParentPath,
					forwardInstanceProp: options.forwardInstanceProp,
					forwardInstancePath: options.forwardInstancePath
				});
			},
			modelForElement(template, el) {
				if (IS_V2) {
					return Polymer.Templatize.modelForElement(template, el);
				}
				const templatizer = template.__czTemplatizer__;
				if (!templatizer) {
					return null;
				}
				return templatizer.modelForElement(el);
			}
		};
	})();
</script>
