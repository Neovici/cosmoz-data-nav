<link rel="import" href="../polymer/polymer.html">
<script>
(function () {
	'use strict';
	Polymer({
		is: 'cosmoz-templatizer',
		behaviors: [
			Polymer.Templatizer
		],
		templatize(template, owner, options = {}) {
			const stamp = this.stamp.bind(this);
			if (this.ctor) {
				return stamp;
			}
			this.__forwardOwner = owner;
			this._instanceProps = options.instanceProps;
			this.__forwardParentProp = options.forwardParentProp;
			this.__forwardParentPath = options.forwardParentPath;
			this.__forwardInstanceProp = options.forwardInstanceProp;
			this.__forwardInstancePath = options.forwardInstancePath;

			Polymer.Templatizer.templatize.call(this, template);
			template.__czTemplatizer__ = this;

			return stamp;
		},
		_forwardParentProp: function (prop, value) {
			const method =  this.__forwardParentProp;
			if (!method) {
				return;
			}
			return method.call(this.__forwardOwner, prop, value);
		},
		_forwardParentPath(path, value) {
			const method =  this.__forwardParentPath;
			if (!method) {
				return;
			}
			return method.call(this.__forwardOwner, path, value);
		},
		_forwardInstanceProp(inst, prop, value) {
			const method =  this.__forwardInstanceProp;
			if (!method) {
				return;
			}
			return method.call(this.__forwardOwner, inst, prop, value);
		},
		_forwardInstancePath(inst, path, value) {
			const method =  this.__forwardInstancePath;
			if (!method) {
				return;
			}
			return method.call(this.__forwardOwner, inst, path, value);
		}

	}
	);
})();
</script>
